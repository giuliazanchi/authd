> ssh ${AUTHD_PAM_SSH_USER}@localhost ${AUTHD_PAM_SSH_ARGS}
== Provider selection ==
  1. local
  2. ExampleBroker
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Choose yo
ur provider:
>
────────────────────────────────────────────────────────────────────────────────
> ssh ${AUTHD_PAM_SSH_USER}@localhost ${AUTHD_PAM_SSH_ARGS}
== Provider selection ==
  1. local
  2. ExampleBroker
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Choose yo
ur provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Gimme you
r password:
>
────────────────────────────────────────────────────────────────────────────────
> ssh ${AUTHD_PAM_SSH_USER}@localhost ${AUTHD_PAM_SSH_ARGS}
== Provider selection ==
  1. local
  2. ExampleBroker
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Choose yo
ur provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Gimme you
r password:
>
Environment:
  USER=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  LOGNAME=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  HOME=${AUTHD_TEST_HOME}
  PATH=${AUTHD_TEST_PATH}
  SHELL=/bin/sh
  TERM=xterm-256color
  SSH_CLIENT=${AUTHD_TEST_SSH_CLIENT}
  SSH_CONNECTION=${AUTHD_TEST_SSH_CONNECTION}
  SSH_TTY=${AUTHD_TEST_SSH_TTY}
────────────────────────────────────────────────────────────────────────────────
> ssh ${AUTHD_PAM_SSH_USER}@localhost ${AUTHD_PAM_SSH_ARGS}
== Provider selection ==
  1. local
  2. ExampleBroker
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Choose yo
ur provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Gimme you
r password:
>
Environment:
  USER=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  LOGNAME=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  HOME=${AUTHD_TEST_HOME}
  PATH=${AUTHD_TEST_PATH}
  SHELL=/bin/sh
  TERM=xterm-256color
  SSH_CLIENT=${AUTHD_TEST_SSH_CLIENT}
  SSH_CONNECTION=${AUTHD_TEST_SSH_CONNECTION}
  SSH_TTY=${AUTHD_TEST_SSH_TTY}
────────────────────────────────────────────────────────────────────────────────
> ssh ${AUTHD_PAM_SSH_USER}@localhost ${AUTHD_PAM_SSH_ARGS}
== Provider selection ==
  1. local
  2. ExampleBroker
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Choose yo
ur provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Gimme you
r password:
>
Environment:
  USER=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  LOGNAME=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  HOME=${AUTHD_TEST_HOME}
  PATH=${AUTHD_TEST_PATH}
  SHELL=/bin/sh
  TERM=xterm-256color
  SSH_CLIENT=${AUTHD_TEST_SSH_CLIENT}
  SSH_CONNECTION=${AUTHD_TEST_SSH_CONNECTION}
  SSH_TTY=${AUTHD_TEST_SSH_TTY}
user-integration-pre-check-authenticate-user-successfully-and-enters-shell
$
────────────────────────────────────────────────────────────────────────────────
> ssh ${AUTHD_PAM_SSH_USER}@localhost ${AUTHD_PAM_SSH_ARGS}
== Provider selection ==
  1. local
  2. ExampleBroker
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Choose yo
ur provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Gimme you
r password:
>
Environment:
  USER=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  LOGNAME=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  HOME=${AUTHD_TEST_HOME}
  PATH=${AUTHD_TEST_PATH}
  SHELL=/bin/sh
  TERM=xterm-256color
  SSH_CLIENT=${AUTHD_TEST_SSH_CLIENT}
  SSH_CONNECTION=${AUTHD_TEST_SSH_CONNECTION}
  SSH_TTY=${AUTHD_TEST_SSH_TTY}
user-integration-pre-check-authenticate-user-successfully-and-enters-shell
$ [ -n "${SSH_CONNECTION}" ] && echo "Inside SSH"
Inside SSH
$
────────────────────────────────────────────────────────────────────────────────
> ssh ${AUTHD_PAM_SSH_USER}@localhost ${AUTHD_PAM_SSH_ARGS}
== Provider selection ==
  1. local
  2. ExampleBroker
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Choose yo
ur provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Gimme you
r password:
>
Environment:
  USER=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  LOGNAME=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  HOME=${AUTHD_TEST_HOME}
  PATH=${AUTHD_TEST_PATH}
  SHELL=/bin/sh
  TERM=xterm-256color
  SSH_CLIENT=${AUTHD_TEST_SSH_CLIENT}
  SSH_CONNECTION=${AUTHD_TEST_SSH_CONNECTION}
  SSH_TTY=${AUTHD_TEST_SSH_TTY}
user-integration-pre-check-authenticate-user-successfully-and-enters-shell
$ [ -n "${SSH_CONNECTION}" ] && echo "Inside SSH"
Inside SSH
$
Connection to localhost closed.
>
────────────────────────────────────────────────────────────────────────────────
> ssh ${AUTHD_PAM_SSH_USER}@localhost ${AUTHD_PAM_SSH_ARGS}
== Provider selection ==
  1. local
  2. ExampleBroker
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Choose yo
ur provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Gimme you
r password:
>
Environment:
  USER=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  LOGNAME=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  HOME=${AUTHD_TEST_HOME}
  PATH=${AUTHD_TEST_PATH}
  SHELL=/bin/sh
  TERM=xterm-256color
  SSH_CLIENT=${AUTHD_TEST_SSH_CLIENT}
  SSH_CONNECTION=${AUTHD_TEST_SSH_CONNECTION}
  SSH_TTY=${AUTHD_TEST_SSH_TTY}
user-integration-pre-check-authenticate-user-successfully-and-enters-shell
$ [ -n "${SSH_CONNECTION}" ] && echo "Inside SSH"
Inside SSH
$
Connection to localhost closed.
> echo ${SSH_CONNECTION:-Outside SSH}
Outside SSH
>
────────────────────────────────────────────────────────────────────────────────
> ssh ${AUTHD_PAM_SSH_USER}@localhost ${AUTHD_PAM_SSH_ARGS}
== Provider selection ==
  1. local
  2. ExampleBroker
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Choose yo
ur provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
(user-integration-pre-check-authenticate-user-successfully-and-enters-shell@localhost) Gimme you
r password:
>
Environment:
  USER=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  LOGNAME=user-integration-pre-check-authenticate-user-successfully-and-enters-shell
  HOME=${AUTHD_TEST_HOME}
  PATH=${AUTHD_TEST_PATH}
  SHELL=/bin/sh
  TERM=xterm-256color
  SSH_CLIENT=${AUTHD_TEST_SSH_CLIENT}
  SSH_CONNECTION=${AUTHD_TEST_SSH_CONNECTION}
  SSH_TTY=${AUTHD_TEST_SSH_TTY}
user-integration-pre-check-authenticate-user-successfully-and-enters-shell
$ [ -n "${SSH_CONNECTION}" ] && echo "Inside SSH"
Inside SSH
$
Connection to localhost closed.
> echo ${SSH_CONNECTION:-Outside SSH}
Outside SSH
>
────────────────────────────────────────────────────────────────────────────────
